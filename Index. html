<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cscstudentdb Portal</title>
    <style>
        :root { --primary: #2563eb; --danger: #dc2626; --warning: #f59e0b; --success: #16a34a; }
        body { font-family: system-ui, sans-serif; background: #f8fafc; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); width: 100%; max-width: 500px; }
        h1 { margin-top: 0; color: #1e293b; font-size: 1.5rem; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        .form-group { margin-bottom: 1rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem; }
        input, select { width: 100%; padding: 0.6rem; border: 1px solid #cbd5e1; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; background: var(--primary); color: white; border: none; padding: 0.8rem; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        button:hover { opacity: 0.9; }
        .result-area { margin-top: 2rem; width: 100%; max-width: 500px; }
        .student-item { background: white; padding: 1rem; border-radius: 8px; margin-bottom: 10px; border-left: 8px solid #cbd5e1; box-shadow: 0 2px 4px rgb(0 0 0 / 0.05); }
        .status-good { border-left-color: var(--success); }
        .status-avg { border-left-color: var(--warning); }
        .status-danger { border-left-color: var(--danger); }
        .badge { font-size: 0.75rem; padding: 2px 8px; border-radius: 99px; color: white; font-weight: bold; }
    </style>
</head>
<body>

    <div class="card">
        <h1>Teacher Login / Entry</h1>
        <div class="form-group">
            <label>Student Name</label>
            <input type="text" id="sName" placeholder="Enter Name">
        </div>
        <div class="form-group">
            <label>Roll No</label>
            <input type="text" id="sRoll" placeholder="Enter Roll No">
        </div>
        <div class="form-group">
            <label>Department</label>
            <select id="sDept">
                <option>CSC</option>
                <option>IT</option>
                <option>ECE</option>
            </select>
        </div>
        <div class="form-group">
            <label>Attendance Percentage</label>
            <input type="number" id="sPerc" placeholder="e.g. 85">
        </div>
        <button onclick="saveStudent()">Save & Generate Profile</button>
    </div>

    <div class="result-area" id="list">
        </div>

    <script>
        function saveStudent() {
            const name = document.getElementById('sName').value;
            const roll = document.getElementById('sRoll').value;
            const dept = document.getElementById('sDept').value;
            const perc = parseFloat(document.getElementById('sPerc').value);

            if(!name || !roll || isNaN(perc)) return alert("Fill all fields");

            // Status Logic
            let status = "Danger 70%";
            let sClass = "status-danger";
            let bColor = "#dc2626";
            if(perc >= 90) { status = "90% Good"; sClass = "status-good"; bColor = "#16a34a"; }
            else if(perc >= 80) { status = "80% Avg"; sClass = "status-avg"; bColor = "#f59e0b"; }

            // Marks Logic
            let marks = "0m";
            if(perc >= 95) marks = "5m";
            else if(perc >= 85) marks = "4m";
            else if(perc >= 75) marks = "3m";
            else if(perc >= 65) marks = "2m";
            else if(perc >= 60) marks = "1m";

            const html = `
                <div class="student-item ${sClass}">
                    <div style="display:flex; justify-content:between; align-items:center">
                        <strong>${name} (${roll})</strong>
                        <span class="badge" style="background:${bColor}; margin-left:auto">${status}</span>
                    </div>
                    <p style="margin: 5px 0; font-size:0.9rem">Dept: ${dept} | Marks: <b>${marks}</b></p>
                    <div style="font-size:0.8rem; color:#64748b">Uploads: Marksheet ✅ | Certificate ✅</div>
                </div>
            `;
            
            document.getElementById('list').innerHTML += html;
            
            // Clear inputs
            document.getElementById('sName').value = "";
            document.getElementById('sRoll').value = "";
            document.getElementById('sPerc').value = "";
        }
    </script>
</body>
</html>
    
    <div class="input-grid">
        <input type="text" id="name" placeholder="Student Name">
        <input type="text" id="roll" placeholder="Roll Number">
        <select id="dept">
            <option value="Computer Science">Computer Science</option>
            <option value="IT">IT</option>
            <option value="ECE">ECE</option>
        </select>
        <input type="number" id="attendance" placeholder="Attendance %">
    </div>

    <div class="upload-box">
        <label>Upload Marksheet (PDF/JPG):</label>
        <input type="file" id="marksheet">
        <label>Upload Certificate (OD):</label>
        <input type="file" id="cert">
    </div>

    <button onclick="addStudent()">Save Student Data</button>

    <h3>Student Database</h3>
    <div style="overflow-x:auto;">
        <table>
            <thead>
                <tr>
                    <th>Roll No</th>
                    <th>Name</th>
                    <th>Dept</th>
                    <th>Attnd %</th>
                    <th>Status</th>
                    <th>Bonus</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>
    
    <button class="clear-btn" onclick="clearDatabase()">Reset Database</button>
</div>

<script>
    // JAVASCRIPT LOGIC
    window.onload = function() {
        renderTable();
    };

    function addStudent() {
        const name = document.getElementById('name').value;
        const roll = document.getElementById('roll').value;
        const dept = document.getElementById('dept').value;
        const attnd = parseFloat(document.getElementById('attendance').value);

        if (!name || !roll || isNaN(attnd)) {
            alert("Please enter all details correctly.");
            return;
        }

        // 1. Determine Status
        let statusClass = "";
        let statusText = "";
        if (attnd >= 90) { statusText = "90% Good"; statusClass = "good"; }
        else if (attnd >= 80) { statusText = "80% Avg"; statusClass = "avg"; }
        else { statusText = "Danger 70%"; statusClass = "danger"; }

        // 2. Mark Allocation Logic
        let marks = "0m";
        if (attnd >= 95) marks = "5m";
        else if (attnd >= 85) marks = "4m";
        else if (attnd >= 75) marks = "3m";
        else if (attnd >= 65) marks = "2m";
        else if (attnd >= 60) marks = "1m";

        const studentObj = { name, roll, dept, attnd, statusText, statusClass, marks };

        // Save to LocalStorage
        let db = JSON.parse(localStorage.getItem('csc_db')) || [];
        db.push(studentObj);
        localStorage.setItem('csc_db', JSON.stringify(db));

        // Reset fields and Refresh
        document.getElementById('name').value = '';
        document.getElementById('roll').value = '';
        document.getElementById('attendance').value = '';
        renderTable();
    }

    function renderTable() {
        const db = JSON.parse(localStorage.getItem('csc_db')) || [];
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = "";

        db.forEach(student => {
            tableBody.innerHTML += `
                <tr>
                    <td>${student.roll}</td>
                    <td>${student.name}</td>
                    <td>${student.dept}</td>
                    <td>${student.attnd}%</td>
                    <td><span class="badge ${student.statusClass}">${student.statusText}</span></td>
                    <td><strong>${student.marks}</strong></td>
                </tr>
            `;
        });
    }

    function clearDatabase() {
        if (confirm("Are you sure you want to delete all student records?")) {
            localStorage.removeItem('csc_db');
            renderTable();
        }
    }
</script>

</body>
</html>
